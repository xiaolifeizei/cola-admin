# Cola-Admin 后端文档

## 序

### 项目地址

- 后端地址：https://gitee.com/xiaolifeizei/cola-admin
- 前端地址：https://gitee.com/xiaolifeizei/cola-ui

### 在线演示

- 演示地址：http://www.cola-admin.vip
- 默认用户：admin
- 默认密码：123123

### 目录结构

```
cola-admin
├──cola-api               # api接口封装，entity/服务接口
├──cola-common            # 全局服务公共模块
├──cola-service           # 业务服务
|  ├─cola-service-basics  # 项目基础服务（系统服务和基础服务）
|  ├─cola-service-common  # 业务服务公共模块
|  └─cola-service-order   # 订单服务（空服务）
├──cola-web               # web接口服务
|  ├─cola-web-auth        # 鉴权模块
|  ├─cola-web-common      # web接口服务公共模块
|  └─cola-web-domain      # web接口主服务
└──doc                    # 文档及脚本
```

## 环境要求

### 基础开发环境

- JDK1.8
- Maven 3.3 +
- Mysql 5.7+
- Redis 4.0+
- Nacos 2.1.0

### IDE插件

- Lombok Plugin（必须要装）

### 推荐IDE

- Intellij IDEA

## 环境准备

### Nacos安装

官方文档：https://nacos.io/zh-cn/docs/quick-start.html 

#### Nacos界面

默认用户名和密码都是nacos

![nacos界面](http://img.cola-admin.vip/image-20220720150225490.png)

### IDEA 插件安装

1. 选择 File->Settings 

   ![image-20220720163307033](http://img.cola-admin.vip/image-20220720163307033.png)

2. 选择 Plugins 并搜索 Lombok 

   ![image-20220720163345946](http://img.cola-admin.vip/image-20220720163345946.png)

3. 点击 Install 按钮 

4. 重启 idea 生效 

### 导入工程

1. 进入cola-admin项目首页https://gitee.com/xiaolifeizei/cola-admin

2. 复制项目地址

   ![image-20220720164052930](http://img.cola-admin.vip/image-20220720164052930.png)

3. 打开IDEA，依次选择： File->New->Project from Version Control

   ![image-20220720165135381](http://img.cola-admin.vip/image-20220720165135381.png)

4. 在弹出的对话框中粘贴复制的项目地址

   ![image-20220720170103600](http://img.cola-admin.vip/image-20220720170103600.png)

5. IDEA可能会弹出对话框提示，点击“Trust Project”

   ![image-20220720170444117](http://img.cola-admin.vip/image-20220720170444117.png)

6. 等待代码下载完成，同时IDEA会自动导入依赖

7. 此时出现“Manage multiple Spring Boot run”对话框，点击Use Services

   ![image-20220720170712904](http://img.cola-admin.vip/image-20220720170712904.png)

8. 点击Service面板可以看到下图的启动项则说明导入成功

   ![image-20220720171023564](http://img.cola-admin.vip/image-20220720171023564.png)

   

### 创建数据库

1. 打开Navicat（此处可以选择其他的客户端），新建一个数据库cola

   ![image-20220720171329451](http://img.cola-admin.vip/image-20220720171329451.png)

   ![image-20220720171407880](http://img.cola-admin.vip/image-20220720171407880.png)

2. 找到cola-admin工程->doc->cola.sql

   ![image-20220720171521290](http://img.cola-admin.vip/image-20220720171521290.png)

3. 执行sql脚本 

   ![image-20220720171456303](http://img.cola-admin.vip/image-20220720171456303.png)

   ![image-20220720171554888](http://img.cola-admin.vip/image-20220720171554888.png)

4. 最终效果

   ![image-20220720171637107](http://img.cola-admin.vip/image-20220720171637107.png)

### 运行工程

1. 修改配置文件

   修改数据库配置：cola-service-common/src/resources/application.yaml

   ![image-20220720173639186](http://img.cola-admin.vip/image-20220720173639186.png)

   修改ServiceBasicsApplication配置：cola-service-basics/src/resources/application.yml

   ![image-20220720173944955](http://img.cola-admin.vip/image-20220720173944955.png)

   修改WebDomainApplication配置：cola-web-domain/src/resources/application.yml

   ![image-20220720174118028](http://img.cola-admin.vip/image-20220720174118028.png)

2. 启动项目

   在Service面板中选中两个服务（ServiceBasicsApplication和WebDomainApplication）后点击右键并点击“Debug”

   ![image-20220720174306401](http://img.cola-admin.vip/image-20220720174306401.png)

   看到服务名后面的端口号时标识项目已经成功运行

   ![image-20220720174603695](http://img.cola-admin.vip/image-20220720174603695.png)

3. 查看Nacos

   打开浏览器登陆Nacos控制台并登陆，查看服务是否成功注册

   ![image-20220720174747109](http://img.cola-admin.vip/image-20220720174747109.png)

   两个服务已经成功注册上了

4. 验证

   打开Postman输入地址：http://localhost:8085/auth/token，并选择**Post**方式提交，参数选择**Body**并选择**JSON**，输入以下内容

   ```json
   {
       "loginName":"admin",
       "password":"123123"
   }
   ```

   点击发送

   ![image-20220720175733768](http://img.cola-admin.vip/image-20220720175733768.png)

   可以看到登陆成功并返回了token

   

   

   未完待续。。。。
